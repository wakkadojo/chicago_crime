{% extends "base.html" %}
{% block content %}

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- for d3 legends -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.13.0/d3-legend.js"></script>
    <!-- for chromatic/cts color scale -->
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <!-- for utility functions -->
    <script src="static/js/d3viz/util.js"></script>
    
    <!-- Post Content -->
    <article>
      <div class="container">
        <div class="row">
          <!-- <div class="col-lg-8 col-md-10 mx-auto"> -->
          <div class="col-md-10 mx-auto">

<p style="color: red;">Dont forget to turn off debug flask</p>

<!-- TODO: migrate style touches! --> 
<style> 
.d3axis { 
    font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 16px; 
    font-weight: 400; 
}

.autotext { 
    font-size: 16px; 
    font-weight: 400; 
    line-height: 1.4;
}

.map_legend_area { 
    fill: url(#gradient_fill_map_legend); 
    stroke-width: 0px; 
}

#crime_top_bot_summary_tbl td, th { 
    text-align: left; 
}

.d3tooltiptext { 
    font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 14px; 
    font-weight: 400; 
}

#tbl_top_bot_start_year,
#tbl_top_bot_end_year {
    text-indent: 2.0em;
}

#crime_top_bot_summary_tbl th + th, 
#crime_top_bot_summary_tbl th + td, 
#crime_top_bot_summary_tbl td + td { 
    text-align: center; 
}

.tbl_container {
    width: 800; 
    margin-left: auto; 
    margin-right: auto; 
    display: table; 
    table-layout: fixed; 
    border-top: 1px solid black; 
    border-bottom: 1px solid black;
}

.tbl_header {
    font-size: 16px;
    font-weight: bold;
    border-bottom: 2px solid black;
}

.archetype_name_tbl {
    font-weight: bold;
}

.archetype_description_tbl {
    font-size: 16px;
}

.legend_text_selected {
    font-weight: bold;
}

</style>
            <h2 class="section-heading">Summary</h2>
            
            <h2 class="section-heading">Sizing up crime</h2>
            <ul>
                <li> Weight by sentencing vs count, discussion of this
                <li> What's big, what's small
                <li> Note on difference of ILCS and IUCR: reported versus court decision can differ -- example is first degree murder (ref email from data owner)
            </ul>
            
            <svg width="800" height="550" id="crime_pct_severity_compare_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <p></p> 
            <div id="crime_pct_severity_compare_autotext_div" class="autotext" style="width: 800; height: 140; margin-left: auto; margin-right: auto; display: table;">&nbsp;</div>
            <script style="javascript" src="static/js/d3viz/crime_weighting_diff.js"></script>
            <p></p>

            <h2 class="section-heading">Inequality on the rise</h2>
            <ul>
                <li> crime intensity: normalize total crime severity to population
                <li> differentiate areas by community area + rationale why I used this
                <li> Summarize: crime went down, inequality up
                <li> Inequality 1: ratio of worst to best
                <li> Inequality 2: Gini (link to external, this is not meant to teach what gini is)
                <li> Discussion on magnitude of changes
                <li> Note on timeseries: rolling year total to avoid seasonality
            </ul>

            </p>
             <blockquote style="text-align: center;">Crime Intensity = (# years served) / person if average prison sentence served in full for every crime reported</blockquote>
            <p>
            
            <svg width="800" height="450" id="crime_top_bot_timeseries_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <p></p>
            <table id="crime_top_bot_summary_tbl" cellpadding="2" class="d3axis tbl_container">
            <tr>
                <td></td>
                <td colspan=4 style="text-align: center;" id="tbl_top_bot_value_description">&nbsp;</td>
            </tr>
            <tr id="top_bot_tbl_header" class="tbl_header">
                <th></th>
                <th id="Property_tbl_column">Property</th>
                <th id="Society_tbl_column">Society</th>
                <th id="Violent_tbl_column">Violent</th>
                <th id="Total_tbl_column">Total</th>
            </tr>
            <tr id="top_bot_tbl_change">
                <th>Change</th>
                <td id="Property_tbl_column"></td>
                <td id="Society_tbl_column"></td>
                <td id="Violent_tbl_column"></td>
                <td id="Total_tbl_column"></td>
            </tr>
            <tr id="top_bot_tbl_endpoint">
                <th id="tbl_top_bot_end_year">&nbsp;</th>
                <td id="Property_tbl_column"></td>
                <td id="Society_tbl_column"></td>
                <td id="Violent_tbl_column"></td>
                <td id="Total_tbl_column"></td>
            </tr>
            <tr id="top_bot_tbl_start">
                <th id="tbl_top_bot_start_year">&nbsp;</th>
                <td id="Property_tbl_column"></td>
                <td id="Society_tbl_column"></td>
                <td id="Violent_tbl_column"></td>
                <td id="Total_tbl_column"></td>
            </tr>
            </table>
            <p></p> 
            <div id="crime_top_bot_autotext_div" class="autotext" style="width: 800; height: 200; margin-left: auto; margin-right: auto; display: table;">&nbsp;</div>
            <script type="text/javascript" src="static/js/d3viz/crime_concentration_summary.js"></script>

            <h2 class="section-heading">Three worlds in Chicago</h2>
            <ul>
                <li> Summarize
                <li> Note segregation
            </ul>
            
            <table id="crime_archetype_tbl" cellpadding="5" class="d3axis tbl_container">
                <col width="225">
                <col width="575">
                <tr>
                <th class="archetype_name_tbl tbl_header" style="text-align: center;" colspan=2>Three Worlds in Chicago</th>
                </tr>
                <tr>
                <td id="affluents_arch_cell" class="archetype_selector_cell">
                    <div class="archetype_name_tbl">The Affluents</div>
                    <div class="archetype_description_tbl">Growing population of top-earners seeing the best improvements in crime and income</div>
                </td>
                    <td rowspan=3 id="crime_ineq_selected_map">
                        <svg width="450" height="450" style="margin-left: auto; margin-right: auto; display: block;"></svg>
                    </td>
                </tr>
                <tr><td id="working_arch_cell" class="archetype_selector_cell">
                    <div class="archetype_name_tbl">The Diverse Working Class</div>
                    <div class="archetype_description_tbl">Middle class of chicago experiencing modest income and marked crime improvements</div>
                </td></tr>
                <tr><td id="distressed_arch_cell" class="archetype_selector_cell">
                    <div class="archetype_name_tbl">The Distressed</div>
                    <div class="archetype_description_tbl">Crime is high, it is flat or decreasing slowly, and incomes are flat or decreasing</div>
                </td></tr>
            </table>

            <!-- slight break before autotext -->
            <p></p> 
            
            <div id="archetype_autotext_div" class="autotext" style="width: 800; height: 125; margin-left: auto; margin-right: auto; display: table;">&nbsp;</div>
            <script type="text/javascript" src="static/js/d3viz/archetype.js"></script>

            <h2 class="section-heading">Next Steps</h2>
            <ul>
                <li> Exploration of drivers and understanding top reasons why inequality has changed
                <li> Get a better measure of crime severity + how to source it (such as working with CPD to get real convictions info)
                <li> Holistic measurements of wealth, including real estate value, foreclosures + how to source it
                <li> Relationship between crime and demographics change -- which populations are growing and shrinking? Which age groups? Which income levels?
                <li> Effects of education + how to source it
            </ul>

            <h2 class="section-heading">Data Sources and Source Code</h2>
            <ul>
                <li> Link to github source
                <li> Explanations of major data sourcing
            </ul>
            
            <h2 class="section-heading">Related Work Investigating Crime in Chicago</h2>
            <ul>
                <li> <a href="http://crime.chicagotribune.com/">http://crime.chicagotribune.com/</a>
                <li> <a href="http://www.chicagohealthatlas.org/">http://www.chicagohealthatlas.org/</a>
                <li> <a href="http://convictions.smartchicagoapps.org/">http://convictions.smartchicagoapps.org/</a>
                <li> <a href="http://tableaupicasso.com/chicago-crime-scene/">http://tableaupicasso.com/chicago-crime-scene/</a>
            </ul>


            <!--
            <h2 class="section-heading">Graveyard</h2>

            <svg width="800" height="600" id="crime_type_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <script type="text/javascript" src="static/js/d3viz/crime_type_summary.js"></script>
            <p></p>

            <svg width="800" height = "500" id="crime_chi_map_int_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <svg width="600" height = "300" id="crime_geo_detail_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <script type="text/javascript" src="static/js/d3viz/crime_intensity_map.js"></script>
            <p></p>
            <svg width="800" height="660" id="crime_severity_bar_svg" style="margin-left: auto; margin-right: auto; display: block;"></svg>
            <script type="text/javascript" src="static/js/d3viz/crime_severity_bars.js"></script>

            -->

<!--

            <blockquote>The dreams of yesterday are the hopes of today and the reality of tomorrow. Science has not yet mastered prophecy. We predict too much for the next year and yet far too little for the next ten.</blockquote>

            <a href="#">
              <img class="img-fluid" src="static/img/post-sample-image.jpg" alt="">
            </a>
            <span class="caption text-muted">To go places and do things that have never been done before – that’s what living is all about.</span>

            <p>Placeholder text by
              <a href="http://spaceipsum.com/">Space Ipsum</a>. Photographs by
              <a href="https://www.flickr.com/photos/nasacommons/">NASA on The Commons</a>.</p>
-->
          </div>
        </div>
      </div>
    </article>
{% endblock %}
